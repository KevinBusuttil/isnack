{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2025-12-12 10:28:17.694363",
 "custom_format": 1,
 "default_print_language": "en-GB",
 "disabled": 0,
 "doc_type": "Sales Invoice",
 "docstatus": 0,
 "doctype": "Print Format",
 "font_size": 14,
 "html": "<style>\n    /* 1. Global Font & Screen Normalization */\n    .print-format {\n        font-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif;\n        color: #333;\n        font-size: 10pt; \n        line-height: 1.4;\n        padding: 15px !important;\n        background-color: transparent;\n        max-width: 850px;\n        margin: 0 auto;\n    }\n\n    /* 2. Print Specific Fixes */\n    @media print {\n        @page {\n            size: A4;\n            /* Bottom margin increased to prevent overlapping with sticky footer */\n            margin: 15mm 10mm 45mm 10mm !important;\n        }\n        \n        .print-format {\n            padding: 0 !important;\n            margin: 0 !important;\n            width: 100%;\n            max-width: 100% !important;\n        }\n\n        /* Forces footer to the bottom of every page */\n        #footer-html {\n            position: fixed;\n            bottom: 0;\n            width: 100%;\n        }\n\n        .page-break {\n            page-break-before: avoid !important;\n            display: block;\n        }\n    }\n\n    /* 3. Header & Branding Styles */\n    .print-heading {\n        border-bottom: 2px solid #333;\n        padding-bottom: 10px;\n        margin-bottom: 20px;\n    }\n\n    .invoice-title {\n        color: #000;\n        text-transform: uppercase;\n        font-weight: 800;\n        margin: 0;\n        font-size: 22pt;\n    }\n\n    .label-grey {\n        font-size: 8pt;\n        color: #888;\n        text-transform: uppercase;\n        font-weight: bold;\n        margin-bottom: 3px;\n    }\n\n    /* 4. Table Construction */\n    .table-custom {\n        width: 100%;\n        margin-top: 15px;\n        border: 1px solid #d1d1d1;\n        border-collapse: collapse;\n    }\n    \n    .table-custom th {\n        background-color: #f9f9f9 !important;\n        border: 1px solid #d1d1d1 !important;\n        padding: 6px 8px !important;\n        text-transform: uppercase;\n        font-size: 8pt;\n        color: #555;\n    }\n    \n    .table-custom td {\n        border: 1px solid #d1d1d1 !important;\n        padding: 6px 8px !important;\n        vertical-align: middle;\n        font-size: 9pt;\n    }\n\n    .item-name-cell {\n        font-weight: bold;\n        font-size: 9.5pt;\n        display: block;\n        margin-bottom: 1px;\n    }\n\n    .item-description-text {\n        color: #666;\n        font-size: 8.5pt;\n        line-height: 1.2;\n    }\n\n    /* 5. Totals & Sticky Footer Styles */\n    .totals-table td {\n        border: none !important;\n        padding: 4px 8px !important;\n    }\n    \n    .grand-total-row {\n        border-top: 1.5pt solid #333 !important;\n        border-bottom: 2pt solid #333 !important;\n        font-weight: bold;\n        font-size: 11.5pt;\n    }\n\n    .bank-details-footer {\n        padding-top: 10px;\n        border-top: 1px solid #333;\n        font-size: 8pt;\n        line-height: 1.3;\n        background-color: white;\n    }\n\n    .bank-label {\n        color: #888;\n        font-weight: bold;\n        text-transform: uppercase;\n        font-size: 7.5pt;\n    }\n</style>\n\n<div class=\"print-format\">\n    <div class=\"page-break\">\n        \n        <div class=\"print-heading\">\n            <div class=\"row\">\n                <div class=\"col-xs-7\">\n                    <img src=\"{{ frappe.db.get_value('Company', doc.company, 'company_logo') or '' }}\" style=\"max-height: 65px;\">\n                    <div style=\"margin-top: 8px; line-height: 1.3;\">\n                        <strong style=\"font-size: 11pt;\">ISNACK SARL</strong><br>\n                        Industrial zone Technopole 1, Lot 67-68, Enfidha 4030, Sousse, Tunisia<br>\n                        <strong>VAT:</strong> 1861028KAM000 | <strong>Reg:</strong> C0195572024<br>\n                        <strong>Web:</strong> www.isnacks.eu | <strong>Email:</strong> administration@isnacks.eu\n                    </div>\n                </div>\n                <div class=\"col-xs-5 text-right\">\n                    <h2 class=\"invoice-title\">SALES INVOICE</h2>\n                    <div style=\"font-size: 12pt; font-weight: bold; color: #b11116; margin-bottom: 8px;\"># {{ doc.name }}</div>\n                    <strong>Date:</strong> {{ frappe.utils.formatdate(doc.posting_date) }}<br>\n                    <strong>Due Date:</strong> {{ frappe.utils.formatdate(doc.due_date) if doc.due_date else \"-\" }}\n                </div>\n            </div>\n        </div>\n\n        <div class=\"row\" style=\"margin-bottom: 15px;\">\n            <div class=\"col-xs-6\">\n                <div class=\"label-grey\">BILL TO</div>\n                <div style=\"font-size: 11pt; font-weight: bold;\">{{ doc.customer_name or doc.customer }}</div>\n                {% if doc.customer_address %}\n                    {% set bill_addr = frappe.get_doc(\"Address\", doc.customer_address) %}\n                    {{ bill_addr.address_line1 }}<br>\n                    {{ bill_addr.city }}{% if bill_addr.pincode %}, {{ bill_addr.pincode }}{% endif %}<br>\n                    {{ bill_addr.country }}\n                {% endif %}\n            </div>\n            <div class=\"col-xs-6 text-right\">\n                <div class=\"label-grey\">SHIP TO</div>\n                {% if doc.shipping_address_name %}\n                    {% set ship_addr = frappe.get_doc(\"Address\", doc.shipping_address_name) %}\n                    <strong>{{ ship_addr.address_title }}</strong><br>\n                    {{ ship_addr.address_line1 }}, {{ ship_addr.city }}\n                {% else %}\n                    <span style=\"color: #999;\">Same as billing</span>\n                {% endif %}\n            </div>\n        </div>\n\n        <div class=\"row\" style=\"background: #fcfcfc; border-top: 1px solid #eee; border-bottom: 1px solid #eee; padding: 8px 0; margin-bottom: 15px;\">\n            <div class=\"col-xs-4\">\n                <div class=\"label-grey\">PAYMENT TERMS</div>\n                <div>{{ doc.payment_terms_template or \"N/A\" }}</div>\n            </div>\n            <div class=\"col-xs-4\">\n                <div class=\"label-grey\">CUSTOMER PO</div>\n                <div>{{ doc.po_no or \"-\" }}</div>\n            </div>\n            <div class=\"col-xs-4 text-right\">\n                <div class=\"label-grey\">CURRENCY</div>\n                <div>{{ doc.currency }}</div>\n            </div>\n        </div>\n\n        {# First pass: detect if any item actually has a Tier 2 discount #}\n        {% set ns = namespace(has_tier2=False) %}\n        {% for row in doc.items %}\n            {% set vals = get_item_discounts(doc, row) %}\n            {% if vals.disc2_amount and vals.disc2_amount|float > 0 %}\n                {% set ns.has_tier2 = True %}\n            {% endif %}\n        {% endfor %}\n\n        <table class=\"table-custom\">\n            <thead>\n                <tr>\n                    <th style=\"width: 5%;\">No.</th>\n                    <th style=\"width: 40%;\">Description of Goods</th>\n                    <th class=\"text-right\" style=\"width: 10%;\">Qty</th>\n                    <th class=\"text-right\" style=\"width: 12%;\">Rate</th>\n        \n                    {# If any Tier 2 exists, show Disc 1 / Disc 2; otherwise show single Disc column #}\n                    <th class=\"text-right\" style=\"width: 10%;\">\n                        Disc{% if ns.has_tier2 %} 1{% endif %}\n                    </th>\n                    {% if ns.has_tier2 %}\n                        <th class=\"text-right\" style=\"width: 10%;\">Disc 2</th>\n                    {% endif %}\n        \n                    <th class=\"text-right\" style=\"width: 13%;\">Total</th>\n                </tr>\n            </thead>\n        \n            <tbody>\n                {% for row in doc.items %}\n                    {% set vals = get_item_discounts(doc, row) %}\n        \n                    <tr>\n                        <td class=\"text-center\">{{ row.idx }}</td>\n        \n                        <td>\n                            <span class=\"item-name-cell\">{{ row.item_name }}</span>\n                            <div class=\"item-description-text\">\n                                {{ row.item_code }} - {{ row.description | striptags }}\n                            </div>\n                        </td>\n        \n                        <td class=\"text-right\">\n                            {{ row.qty }}<br>\n                            <small>{{ row.uom }}</small>\n                        </td>\n        \n                        {# Rate: price_list_rate (pre-discount) from utility #}\n                        <td class=\"text-right\">\n                            {{ frappe.format_value(vals.base_rate, {\"fieldtype\": \"Currency\", \"options\": doc.currency}, doc) }}\n                        </td>\n        \n                        {# Disc / Disc 1: Tier 1 amount #}\n                        <td class=\"text-right\">\n                            {{ frappe.format_value(vals.disc1_amount, {\"fieldtype\": \"Currency\", \"options\": doc.currency}, doc) }}\n                        </td>\n        \n                        {# Disc 2 column only if any Tier 2 exists on the invoice #}\n                        {% if ns.has_tier2 %}\n                            <td class=\"text-right\">\n                                {{ frappe.format_value(vals.disc2_amount, {\"fieldtype\": \"Currency\", \"options\": doc.currency}, doc) }}\n                            </td>\n                        {% endif %}\n        \n                        {# Total: after Disc 1 (+ Disc 2 if present) #}\n                        <td class=\"text-right\">\n                            <strong>\n                                {{ frappe.format_value(vals.total, {\"fieldtype\": \"Currency\", \"options\": doc.currency}, doc) }}\n                            </strong>\n                        </td>\n                    </tr>\n                {% endfor %}\n            </tbody>\n        </table>\n\n        <div class=\"row\" style=\"margin-top: 20px;\">\n            <div class=\"col-xs-7\">\n                {% if doc.terms %}\n                    <div class=\"label-grey\">Terms & Conditions</div>\n                    <div style=\"font-size: 8.5pt; color: #555; padding-right: 25px;\">\n                        {{ doc.terms }}\n                    </div>\n                {% endif %}\n            </div>\n\n            {# --- Compute Gross Amount and Discount Total from line items --- #}\n            {% set totals = namespace(gross=0, discount_total=0) %}\n            {% for row in doc.items %}\n                {% set vals = get_item_discounts(doc, row) %}\n                {% set totals.gross = totals.gross + (vals.base_amount or 0) %}\n                {% set totals.discount_total = totals.discount_total\n                    + ((vals.disc1_amount or 0) + (vals.disc2_amount or 0)) %}\n            {% endfor %}\n\n            <div class=\"col-xs-5\">\n                <table class=\"table totals-table\">\n                    <tr>\n                        <td>Gross Amount</td>\n                        <td class=\"text-right\">\n                            {{ frappe.format_value(\n                                totals.gross,\n                                {\"fieldtype\": \"Currency\", \"options\": doc.currency},\n                                doc\n                            ) }}\n                        </td>\n                    </tr>\n                    <tr>\n                        <td>Discount Total</td>\n                        <td class=\"text-right\">\n                            {{ frappe.format_value(\n                                totals.discount_total,\n                                {\"fieldtype\": \"Currency\", \"options\": doc.currency},\n                                doc\n                            ) }}\n                        </td>\n                    </tr>\n                    <tr>\n                        <td>VAT</td>\n                        <td class=\"text-right\">\n                            {{ doc.get_formatted(\"total_taxes_and_charges\") }}\n                        </td>\n                    </tr>\n                    <tr class=\"grand-total-row\">\n                        <td>Grand Total</td>\n                        <td class=\"text-right\">\n                            {{ doc.get_formatted(\"grand_total\") }}\n                        </td>\n                    </tr>\n                </table>\n            </div>\n        </div>\n\n        <div id=\"footer-html\" class=\"visible-pdf\">\n            <div class=\"bank-details-footer\">\n                <div class=\"row\">\n                    <div class=\"col-xs-4\">\n                        <div class=\"bank-label\">Bank Name & Address</div>\n                        <strong>BANQUE INTERNATIONALE ARABE DE TUNISIE</strong><br>\n                        70-72 AVENUE HABIB BOURGUIBA<br>\n                        TUNIS, ZIP 1000, TUNISIA\n                    </div>\n                    <div class=\"col-xs-5\">\n                        <div class=\"bank-label\">Account Numbers (IBAN)</div>\n                        <strong>EUR:</strong> TN5908133030035100141464<br>\n                        <strong>TND:</strong> TN5908133030035000026018\n                    </div>\n                    <div class=\"col-xs-3 text-right\">\n                        <div class=\"bank-label\">Swift / BIC</div>\n                        <strong>BIATTNTTXXX</strong>\n                    </div>\n                </div>\n                \n                <div style=\"margin-top: 10px; height: 30px; text-align: center; border-top: 1px solid #f9f9f9;\">\n                    </div>\n\n                <p class=\"text-center small\" style=\"font-size: 7.5pt; color: #bbb; margin-top: 5px;\">\n                    {{ _(\"Page {0} of {1}\").format('<span class=\"page\"></span>', '<span class=\"topage\"></span>') }}\n                </p>\n            </div>\n        </div>\n\n    </div>\n</div>",
 "idx": 0,
 "line_breaks": 0,
 "margin_bottom": 15.0,
 "margin_left": 15.0,
 "margin_right": 15.0,
 "margin_top": 15.0,
 "modified": "2025-12-19 10:23:24.914436",
 "modified_by": "Administrator",
 "module": "Isnack",
 "name": "Sales Invoice",
 "owner": "Administrator",
 "page_number": "Hide",
 "pdf_generator": "wkhtmltopdf",
 "print_format_builder": 0,
 "print_format_builder_beta": 0,
 "print_format_for": "DocType",
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}