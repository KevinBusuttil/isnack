<!-- Operator Hub — Single-Screen Layout (Bootstrap 5) -->
<div class="mes-operator p-2 p-md-3">

  <!-- Header toolbar: Operator / Line / Shift + actions -->
  <div class="card shadow-sm border-0 mb-2">
    <div class="card-body">
      <div id="op-toolbar" class="op-toolbar d-flex align-items-center justify-content-between">
        <div class="d-flex flex-wrap align-items-center gap-3">
          <span class="label">Operator:</span>
          <span id="kiosk-emp-label">—</span>
          <button id="kiosk-choose-emp" class="btn btn-sm btn-outline-secondary">Set</button>

          <span class="vr"></span>

          <span class="label">Line:</span>
          <span id="kiosk-line-label">—</span>
          <button id="kiosk-choose-line" class="btn btn-sm btn-outline-primary">Set</button>

          <span class="vr"></span>

          <span class="label">Shift:</span>
          <span id="shift-label" class="badge op-badge op-badge-shift">—</span>
        </div>

        <div class="d-flex flex-wrap align-items-center gap-2">
          <span id="scan-status" class="badge op-badge op-badge-status">Ready</span>
          <button id="kiosk-clear-emp" class="btn btn-sm btn-outline-danger">Clear</button>
          <button id="kiosk-fullscreen" class="btn btn-sm btn-outline-primary">Full Screen</button>
          <button id="kiosk-toggle-chrome" class="btn btn-sm btn-outline-secondary">Hide Header</button>
          <div class="text-muted ms-2" id="op-time">--:--</div>
        </div>
      </div>
    </div>
  </div>

  <div class="row g-3">
    <!-- Current Work Order Panel -->
    <div class="col-lg-5">
      <div class="card shadow-sm border-0 mb-2 op-panel op-panel-primary">
        <div class="card-header bg-white border-0 pt-2 pb-0">
          <div class="h6 mb-0">Current Work Order</div>
        </div>
        <div class="card-body op-wo-banner" id="wo-banner">
          <div class="text-muted">Select a Work Order…</div>
        </div>
      </div>
    </div>

    <!-- Materials panel -->
    <div class="col-lg-7">
      <div class="card shadow-sm border-0 mb-2 op-panel op-panel-info">
        <div class="card-header bg-white border-0 pt-2 pb-0 d-flex justify-content-between align-items-center">
          <div class="h6 mb-0">Materials for WO: <span id="mat-wo-label">—</span></div>
        </div>
        <div class="card-body">
          <div id="mat-empty" class="text-muted">Select a Work Order to load materials.</div>

          <div id="mat-content" class="d-none">
            <div class="row g-3">
              <div class="col-lg-8">
                <div class="table-responsive">
                  <table class="table table-sm align-middle">
                    <thead>
                      <tr>
                        <th>Item</th>
                        <th style="min-width:180px">Name</th>
                        <th class="text-end">UoM</th>
                        <th class="text-end">Required</th>
                        <th class="text-end">Issued</th>
                        <th class="text-end">Remaining</th>
                      </tr>
                    </thead>
                    <tbody id="mat-req-tbody"></tbody>
                  </table>
                </div>
              </div>
              <div class="col-lg-4">
                <div class="h6">Recent Issues/Transfers</div>
                <ul class="list-group" id="mat-scans"></ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Assigned Work Orders -->
  <div class="mb-2 d-flex align-items-center justify-content-between">
    <div class="h6 mb-0">Assigned Work Orders</div>
  </div>

  <div class="card shadow-sm border-0 mb-3 op-panel op-panel-neutral">
    <div class="list-group list-group-flush" id="wo-grid">
      <!-- JS renders rows here -->
    </div>
  </div>

  <!-- Hidden scanner input (kept focused via JS) -->
  <input id="scan" style="opacity:0;position:absolute;left:-9999px" />
</div>

<!-- Sticky Bottom Bars -->
<div class="mes-operator-bottom">
  <!-- Action Bar (grouped with separators) -->
  <div class="action-bar py-3">
    <div class="container-fluid">
      <div class="op-bottom d-flex flex-nowrap align-items-stretch" style="gap:1rem">

        <!-- Group 1: Run controls -->
        <div class="tile-group">
          <button id="btn-start" class="btn btn-lg btn-primary tile-btn">Start</button>
          <button id="btn-pause" class="btn btn-lg btn-warning tile-btn">Pause</button>
          <button id="btn-stop"  class="btn btn-lg btn-secondary tile-btn">Stop</button>
        </div>

        <!-- Group 2: Materials -->
        <div class="tile-group">
          <button id="btn-load"    class="btn btn-lg btn-info tile-btn">Load Materials</button>
          <button id="btn-request" class="btn btn-lg btn-warning tile-btn">Request More Material</button>
          <button id="btn-return"  class="btn btn-lg btn-outline-secondary tile-btn">Return Materials</button>
        </div>

        <!-- Group 3: Output -->
        <div class="tile-group">
          <button id="btn-label" class="btn btn-lg btn-success tile-btn" disabled>Print Label</button>
          <button id="btn-close" class="btn btn-lg btn-secondary tile-btn">Close / End</button>
        </div>

      </div>
    </div>
  </div>

  <!-- Status Bar -->
  <div id="status-bar" class="status-bar small text-light d-flex align-items-center justify-content-between px-3">
    <span id="status-message">Ready</span>
    <span id="status-connection">Online</span>
  </div>
</div>
